## 1. 项目结构重构
- [x] 1.1 创建新的目录结构：`/src/cli/`, `/src/ui/`, `/src/installer/`, `/src/config/`, `/src/distro/`, `/src/system/`, `/src/utils/`
- [x] 1.2 将 UI 相关代码从 `src/ui.rs` 移动到 `src/ui/` 模块，包含子文件 (colors.rs, progress.rs, display.rs)
- [x] 1.3 将安装器逻辑从 `src/installer.rs` 移动到 `src/installer/` 模块 (mod.rs, download.rs, extract.rs, configure.rs)
- [x] 1.4 将配置逻辑从 `src/config.rs` 移动到 `src/config/` 模块 (mod.rs, parser.rs, defaults.rs)
- [x] 1.5 将发行版逻辑从 `src/distro.rs` 移动到 `src/distro/` 模块 (mod.rs, definitions.rs)
- [x] 1.6 将系统逻辑从 `src/system.rs` 移动到 `src/system/` 模块 (mod.rs, manage.rs, permissions.rs)
- [x] 1.7 从 `src/utils.rs` 提取工具函数到 `src/utils/` 模块 (mod.rs, fs.rs, cmd.rs, net.rs)
- [x] 1.8 在 `src/i18n/` 中创建国际化模块结构 (mod.rs, locales/en.toml, locales/zh.toml)
- [x] 1.9 更新 `Cargo.toml` 以匹配新的模块结构（二进制文件重命名为 insOs）
- [x] 1.10 更新整个代码库中的所有模块导入
- [x] 1.11 验证重构后的编译（构建成功，但有警告）

## 2. 代码模块化
- [x] 2.1 分析 `src/cli.rs` 并将 CLI 解析逻辑提取到 `src/cli/args.rs`
- [x] 2.2 分析 `src/cli.rs` 并将交互式菜单逻辑提取到 `src/cli/interactive.rs`
- [x] 2.3 为通用操作创建共享工具模块
- [x] 2.4 移除重复代码并整合辅助函数
- [x] 2.5 为新的工具模块添加单元测试

## 3. UI 增强 - 进度条
- [x] 3.1 在 `src/ui/progress.rs` 中创建新的 ASCII 艺术进度条实现
- [x] 3.2 实现进度条渲染：`0% [                    ]`
- [x] 3.3 实现进度增量：1%~100%，带有可视条
- [x] 3.4 更新安装器进度回调以使用新的进度条
- [x] 3.5 使用不同终端宽度测试进度条
- [x] 3.6 确保进度条在小屏幕上正确显示

## 4. ANSI 颜色和主题
- [x] 4.1 在 `src/ui/colors.rs` 中创建颜色常量和主题系统
- [x] 4.2 实现彩色输出函数（成功、错误、警告、信息、进度）
- [x] 4.3 实现颜色检测和禁用逻辑
- [x] 4.4 在 `src/cli/args.rs` 中添加 `--no-color` 标志到 CLI 选项
- [x] 4.5 确保颜色在各种终端模拟器上工作
- [x] 4.6 测试带和不带标志的颜色输出

## 5. 重命名和路径更改
- [x] 5.1 更新 `Cargo.toml`，将二进制文件从 `termux-linux-install` 重命名为 `insOs`
- [x] 5.2 在源代码中将所有 `$HOME/Ostermux/` 替换为 `$HOME/termos/`（6 个文件，8 处替换）
- [x] 5.3 更新文档中对旧名称的引用
- [x] 5.4 更新配置文件路径和引用
- [x] 5.5 使用新命名测试安装

## 6. 配置系统增强
- [x] 6.1 向配置文件格式添加 `shell` 配置选项
- [x] 6.2 实现从配置中解析自定义 shell 命令
- [x] 6.3 更新登录过程以使用自定义 shell 命令
- [x] 6.4 修改 `src/config.rs` 以支持新的配置选项
- [x] 6.5 为自定义 shell 命令添加验证
- [x] 6.6 使用各种命令格式测试自定义 shell

## 7. 国际化 (i18n)
- [x] 7.1 在 `src/i18n/` 中创建国际化模块结构
- [x] 7.2 将所有中文文本字符串提取到语言文件
- [x] 7.3 创建英文翻译文件
- [x] 7.4 添加语言检测和选择逻辑
- [x] 7.5 向 CLI 添加 `--lang` 标志用于手动语言选择
- [x] 7.6 更新所有 UI 组件以使用国际化系统
- [x] 7.7 测试中英文界面

## 8. 系统集成改进
- [ ] 8.1 在 `src/utils/` 中实现真实的用户组检测
- [ ] 8.2 实现真实的权限检测
- [ ] 8.3 替换硬编码的用户/组假设
- [ ] 8.4 更新文件操作以尊重实际权限
- [ ] 8.5 为权限相关操作添加错误处理
- [ ] 8.6 在不同用户配置的设备上测试

## 9. 默认系统设置优化
- [ ] 9.1 审查 `src/distro.rs` 中的当前默认设置
- [ ] 9.2 为每个发行版优化默认软件包选择
- [ ] 9.3 如果需要，更新默认镜像 URL
- [ ] 9.4 改进默认安装配置
- [ ] 9.5 在所有支持的发行版上测试优化的默认值

## 10. 代码清理
- [ ] 10.1 识别并移除未使用的函数
- [ ] 10.2 移除死代码和注释掉的代码段
- [ ] 10.3 整合重复的工具函数
- [ ] 10.4 运行 clippy 并修复警告
- [ ] 10.5 优化导入并移除未使用的依赖项
- [ ] 10.6 验证清理后没有功能丢失

## 11. 测试和验证
- [ ] 11.1 在所有更改后运行完整测试套件
- [ ] 11.2 测试每个发行版的安装过程
- [ ] 11.3 测试 CLI 标志和选项
- [ ] 11.4 测试交互式菜单功能
- [ ] 11.5 在适用的情况下验证向后兼容性
- [ ] 11.6 在不同的 Termux 版本上测试

## 12. 文档
- [ ] 12.1 使用新的可执行文件名更新 README.md
- [ ] 12.2 更新安装说明
- [ ] 12.3 记录新的配置选项
- [ ] 12.4 为现有用户记录迁移路径
- [ ] 12.5 为翻译人员添加国际化文档
- [ ] 12.6 更新内联代码文档